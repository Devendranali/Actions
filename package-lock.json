#!/bin/bash

# Update system packages
echo "Updating system packages..."
sudo yum update -y

# Install Python 3.8
echo "Installing Python 3.8..."
sudo amazon-linux-extras enable python3.8
sudo yum install python3.8 -y

# Verify Python installation
echo "Verifying Python installation..."
python3.8 --version

# Install pip for Python 3.8
echo "Installing pip..."
sudo yum install python3-pip -y

# Upgrade pip
echo "Upgrading pip..."
python3.8 -m pip install --upgrade pip

# Install boto3 and botocore
echo "Installing boto3 and botocore..."
python3.8 -m pip install boto3 botocore

# Install Ansible
echo "Installing Ansible..."
python3.8 -m pip install ansible

# Verify Ansible installation
echo "Verifying Ansible installation..."
ansible --version

# Install amazon.aws collection
echo "Installing amazon.aws collection..."
ansible-galaxy collection install amazon.aws
